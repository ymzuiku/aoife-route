function a(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function w(t,e){if(!t)return null;let i=/([^=?&]+)=?([^&]*)/g,n={},o;for(;o=i.exec(t);){let l=a(o[1]),r=a(o[2]);l===null||r===null||l in n||(e||(r=isNaN(Number(r))?r:Number(r)),n[l]=r)}return n}function b(t,e=""){let i=[],n,o;typeof e!="string"&&(e="?");for(o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(n=t[o],!n&&(n==null||isNaN(n))&&(n=""),o=encodeURIComponent(o),n=encodeURIComponent(n),o===null||n===null)continue;i.push(`${o}=${n}`)}return i.length?e+i.join("&"):""}var g={parse:w,stringify:b,decode:a},u=g;var y=[];["popstate","pushState","replaceState"].forEach(t=>{window.addEventListener(t,()=>{c.state=u.parse(location.search),y.forEach(e=>e())})});function d(t){let e=document.createElement("span");return e.style.display="none",e.setAttribute("aoife-route",t),e}var h=0,c=({root:t,url:e,render:i,preload:n})=>{if(typeof i!="function")throw"AoifeRoute.render need a Function";h+=1;let o=""+h,l=()=>{if(n&&i(),typeof e=="function"){if(!e())return d(o)}else{let s=!1;if(t&&window.location.pathname==="/"&&(s=!0),!s&&u.decode(window.location.pathname)!==e)return d(o)}let r=i();if(r.then){let s=d(o);return Promise.resolve(r).then(f=>{if(f.default){let p=document.querySelector(`[aoife-route="${o}"]`);if(!p)return;let m=f.default();m.setAttribute("aoife-route",o),p.replaceWith(m)}}),s}return r.setAttribute("aoife-route",o),r};return y.push(()=>{let r=document.querySelector(`[aoife-route="${o}"]`);!r||r.replaceWith(l())}),l()};c.state={};c.queryString=u;c.push=(t,e,i)=>{e&&(t+="?"+u.stringify(e)),i||(window.scrollTo&&window.scrollTo({top:0}),document.body&&document.body.scrollTo&&document.body.scrollTo({top:0}),document.documentElement&&document.documentElement.scrollTo&&document.documentElement.scrollTo({top:0})),setTimeout(()=>{history.pushState(e,"",t),window.dispatchEvent(new Event("pushState"))})};c.replace=(t,e,i)=>{e&&(t+="?"+u.stringify(e)),i||(window.scrollTo&&window.scrollTo({top:0}),document.body&&document.body.scrollTo&&document.body.scrollTo({top:0}),document.documentElement&&document.documentElement.scrollTo&&document.documentElement.scrollTo({top:0})),setTimeout(()=>{history.replaceState(e,"",t),window.dispatchEvent(new Event("replaceState"))})};c.back=()=>{history.back()};var E=c;export{E as default};
