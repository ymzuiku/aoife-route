var q=Object.create,w=Object.defineProperty,A=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=Object.getOwnPropertyNames,N=Object.getOwnPropertyDescriptor;var P=t=>w(t,"__esModule",{value:!0});var j=(t,e)=>()=>(e||(e={exports:{}},t(e.exports,e)),e.exports);var x=(t,e,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of I(e))!T.call(t,f)&&f!=="default"&&w(t,f,{get:()=>e[f],enumerable:!(i=N(e,f))||i.enumerable});return t},C=t=>x(P(w(t!=null?q(A(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var S=j((h,v)=>{(function(t,e){typeof h=="object"&&typeof v!="undefined"?e(h):typeof define=="function"&&define.amd?define(["exports"],e):e((t=t||self).queryString={})})(h,function(t){"use strict";function e(o){try{return decodeURIComponent(o.replace(/\+/g," "))}catch(r){return null}}function i(o){try{return encodeURIComponent(o)}catch(r){return null}}function f(o,r){if(!o)return null;for(var n,a=/([^=?&]+)=?([^&]*)/g,c={};n=a.exec(o);){var y=e(n[1]),u=e(n[2]);if(!(y===null||u===null||y in c))if(r||typeof u!="string")c[y]=u;else{var g=Number(u),b=isNaN(g)?u:g;c[y]=u==b.toString()?b:u}}return c}function s(o,r){r===void 0&&(r="");var n,a,c=[];for(a in typeof r!="string"&&(r="?"),o)if(Object.prototype.hasOwnProperty.call(o,a)){if((n=o[a])||n!=null&&!isNaN(n)||(n=""),a=encodeURIComponent(a),n=encodeURIComponent(n),a===null||n===null)continue;c.push(a+"="+n)}return c.length?r+c.join("&"):""}var d={parse:f,stringify:s,decode:e,encode:i};t.decode=e,t.default=d,t.encode=i,t.parse=f,t.stringify=s,Object.defineProperty(t,"__esModule",{value:!0})})});var p=C(S()),E=[];["popstate","pushState","replaceState"].forEach(t=>{window.addEventListener(t,()=>{l.state=p.default.parse(location.search),E.forEach(e=>e())})});function m(t){let e=document.createElement("span");return e.style.display="none",e.setAttribute("aoife-route",t),e}var R=0,l=({root:t,url:e,render:i,preload:f})=>{if(typeof i!="function")throw"AoifeRoute.render need a Function";R+=1;let s=""+R,d=()=>{if(f&&i(),typeof e=="function"){if(!e())return m(s)}else{let r=!1;if(t&&window.location.pathname==="/"&&(r=!0),!r&&p.default.decode(window.location.pathname)!==e)return m(s)}let o=i();if(o.then){let r=m(s);return Promise.resolve(o).then(n=>{if(n.default){let a=document.querySelector(`[aoife-route="${s}"]`);if(!a)return;let c=n.default();c.setAttribute("aoife-route",s),a.replaceWith(c)}}),r}return o.setAttribute("aoife-route",s),o};return E.push(()=>{let o=document.querySelector(`[aoife-route="${s}"]`);!o||o.replaceWith(d())}),d()};l.state={};l.queryString=p.default;l.push=(t,e,i)=>{e&&(t+="?"+p.default.stringify(e)),i||window.scrollTo&&window.scrollTo({top:0}),setTimeout(()=>{history.pushState(e,"",t),window.dispatchEvent(new Event("pushState"))})};l.replace=(t,e,i)=>{e&&(t+="?"+p.default.stringify(e)),i||window.scrollTo&&window.scrollTo({top:0}),setTimeout(()=>{history.replaceState(e,"",t),window.dispatchEvent(new Event("replaceState"))})};l.back=()=>{history.back()};var U=l;export{U as default};
