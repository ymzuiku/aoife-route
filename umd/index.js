!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Route=t()}(this,function(){"use strict";function c(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var i={parse:function(e,t){if(!e)return null;for(var o=/([^=?&]+)=?([^&]*)/g,n={};u=o.exec(e);){var r=c(u[1]),u=c(u[2]);null===r||null===u||r in n||(t||(u=isNaN(Number(u))?u:Number(u)),n[r]=u)}return n},stringify:function(e,t){var o,n,r=[];for(n in"string"!=typeof(t=void 0===t?"":t)&&(t="?"),e)Object.prototype.hasOwnProperty.call(e,n)&&((o=e[n])||null!=o&&!isNaN(o)||(o=""),n=encodeURIComponent(n),o=encodeURIComponent(o),null!==n&&null!==o&&r.push(n+"="+o));return r.length?t+r.join("&"):""},decode:c},l=[];function d(e){var t=document.createElement("span");return t.style.display="none",t.setAttribute("aoife-route",e),t}["popstate","pushState","replaceState"].forEach(function(e){window.addEventListener(e,function(){t.state=i.parse(location.search),l.forEach(function(e){return e()})})});var a=0,t=function(e){var o=e.root,n=e.url,r=e.render,u=e.preload;if("function"!=typeof r)throw"AoifeRoute.render need a Function";function t(){if(u&&r(),"function"==typeof n){if(!n())return d(c)}else{var e=!1;if(!(e=o&&"/"===window.location.pathname?!0:e)&&i.decode(window.location.pathname)!==n)return d(c)}var t=r();if(t.then){e=d(c);return Promise.resolve(t).then(function(e){var t;!e.default||(t=document.querySelector('[aoife-route="'+c+'"]'))&&((e=e.default()).setAttribute("aoife-route",c),t.replaceWith(e))}),e}return t.setAttribute("aoife-route",c),t}var c=""+(a+=1);return l.push(function(){var e=document.querySelector('[aoife-route="'+c+'"]');e&&e.replaceWith(t())}),t()};return t.state={},t.queryString=i,t.push=function(e,t,o){t&&(e+="?"+i.stringify(t)),o||(window.scrollTo&&window.scrollTo({top:0}),document.body&&document.body.scrollTo&&document.body.scrollTo({top:0}),document.documentElement&&document.documentElement.scrollTo&&document.documentElement.scrollTo({top:0})),setTimeout(function(){history.pushState(t,"",e),window.dispatchEvent(new Event("pushState"))})},t.replace=function(e,t,o){t&&(e+="?"+i.stringify(t)),o||(window.scrollTo&&window.scrollTo({top:0}),document.body&&document.body.scrollTo&&document.body.scrollTo({top:0}),document.documentElement&&document.documentElement.scrollTo&&document.documentElement.scrollTo({top:0})),setTimeout(function(){history.replaceState(t,"",e),window.dispatchEvent(new Event("replaceState"))})},t.back=function(){history.back()},t});
//# sourceMappingURL=index.js.map
