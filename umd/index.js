!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("querystring-number")):"function"==typeof define&&define.amd?define(["querystring-number"],t):(e=e||self).Route=t(e.queryString)}(this,function(a){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var c=[];function f(e){var t=document.createElement("span");return t.style.display="none",t.setAttribute("aoife-route",e),t}["popstate","pushState","replaceState"].forEach(function(e){window.addEventListener(e,function(){t.state=a.parse(location.search),c.forEach(function(e){return e()})})});var s=0,t=function(e){var n=e.root,o=e.url,r=e.render,i=e.preload;if("function"!=typeof r)throw"AoifeRoute.render need a Function";function t(){if(i&&r(),"function"==typeof o){if(!o())return f(u)}else{var e=!1;if(!(e=n&&"/"===window.location.pathname?!0:e)&&a.decode(window.location.pathname)!==o)return f(u)}var t=r();if(t.then){e=f(u);return Promise.resolve(t).then(function(e){var t;!e.default||(t=document.querySelector('[aoife-route="'+u+'"]'))&&((e=e.default()).setAttribute("aoife-route",u),t.replaceWith(e))}),e}return t.setAttribute("aoife-route",u),t}var u=""+(s+=1);return c.push(function(){var e=document.querySelector('[aoife-route="'+u+'"]');e&&e.replaceWith(t())}),t()};return t.state={},t.queryString=a,t.push=function(e,t,n){t&&(e+="?"+a.stringify(t)),n||window.scrollTo&&window.scrollTo({top:0}),setTimeout(function(){history.pushState(t,"",e),window.dispatchEvent(new Event("pushState"))})},t.replace=function(e,t,n){t&&(e+="?"+a.stringify(t)),n||window.scrollTo&&window.scrollTo({top:0}),setTimeout(function(){history.replaceState(t,"",e),window.dispatchEvent(new Event("replaceState"))})},t.back=function(){history.back()},t});
//# sourceMappingURL=index.js.map
